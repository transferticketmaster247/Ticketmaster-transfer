<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Tickets</title>
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
    background-color: #fff;
    color: #000;
    min-height: 100vh;
    overflow-x: hidden;
    overflow-y: auto;
  }

  .header {
    height: 48px;
    background-color: #000;
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    font-size: 16px;
    font-weight: 500;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
  }

  .close, .help {
    font-size: 16px;
    font-weight: 400;
    user-select: none;
    cursor: pointer;
  }

  .title {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    font-weight: 500;
    font-size: 17px;
    white-space: nowrap;
  }

  .tab-row {
    display: flex;
    justify-content: space-around;
    background: #0074e4;
    color: white;
    font-weight: 500;
    font-size: 15px;
    position: sticky;
    top: 0;
    z-index: 999;
  }

  .tab {
    flex: 1;
    text-align: center;
    padding: 12px 0;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity 0.2s ease, border-bottom 0.2s ease;
  }

  .tab.active {
    opacity: 1;
    border-bottom: 3px solid white;
  }

  .ticket-carousel {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    gap: 16px;
    padding: 20px 32px 0;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    scroll-padding-left: 16px;
    justify-content: flex-start;
  }

  .ticket-carousel::-webkit-scrollbar {
    display: none;
  }

  .carousel-spacer {
    flex: 0 0 calc((100vw - 340px) / 2);
  }

  .ticket-card {
    flex: 0 0 340px;
    height: 520px;
    background-color: #fff;
    border-radius: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    scroll-snap-align: center;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  .ticket-top {
    background-color: #0074e4;
    color: white;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    height: 120px;
  }

  .ticket-top-tip {
    height: 90px;
    background-color: #0074e4;
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 1;
  }

  .ticket-label {
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    color: white;
  }

  .ticket-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 80%;
    max-width: 300px;
    margin: 16px auto 0 auto;
    padding-bottom: 12px;
  }

  .info-block {
    flex: 1;
    text-align: center;
  }

  .info-title {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.4px;
    color: #cce4ff;
    text-transform: uppercase;
  }

  .info-value {
    font-size: 22px;
    font-weight: 700;
    margin-top: 2px;
  }

  .ticket-image {
    height: 280px;
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .ticket-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .gradient-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0.0));
    z-index: 1;
  }

  .overlay {
    position: absolute;
    bottom: 4px;
    left: 16px;
    right: 16px;
    color: white;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 4px;
    align-items: center;
    text-align: center;
  }

  .event-title {
    color: white;
    font-size: 17px;
    font-weight: 600;
    font-family: 'Helvetica Neue', sans-serif;
    text-align: center;
    padding: 12px 16px 0;
    margin: 0 auto;
    line-height: 1.3;
    max-width: 280px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .event-sub {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 13px;
    color: #d0d0d0;
  }

  .ticket-bottom {
    padding: 16px;
    text-align: center;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 120px;
    gap: 8px;
  }

  .floor {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 12px;
  }

  .view-ticket {
    background-color: #0074e4;
    color: white;
    border: none;
    padding: 12px 0;
    width: 90%;
    max-width: 280px;
    border-radius: 6px;
    font-weight: 400;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    cursor: pointer;
  }

  .view-ticket .icon {
    width: 20px;
    height: 20px;
    display: inline-block;
    filter: brightness(0) invert(1);
  }

  .ticket-details {
    color: #0074e4;
    font-size: 14px;
    margin: 12px 0 0;
    cursor: pointer;
  }

  .ticket-bottom-line {
    height: 3px;
    background-color: #007aff;
    width: 100%;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  .dots {
    text-align: center;
    margin-top: 20px;
    margin-bottom: 8px;
  }

  .dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    margin: 0 6px;
    background-color: #ccc;
    border-radius: 50%;
    transition: background-color 0.3s ease;
  }

  .dot.active {
    background-color: #0074e4;
  }

  .actions {
    position: fixed;
    bottom: 26px; 
    left: 0;
    right: 0;
    background: #fff;
    padding: 6px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid #e0e0e0;
    z-index: 900;
    gap: 12px;
  }

  .actions.hidden {
    display: none;
  }

  .btn {
    flex: 1;
    padding: 12px 0;
    font-size: 14px;
    font-weight: bold;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
    max-width: 160px;
    height: 45px;
    text-transform: uppercase;
  }

  .btn.transfer {
    background-color: #0074e4;
    color: white;
  }

  .btn.sell {
    background-color: #f1f1f1;
    color: #aaa;
    cursor: not-allowed;
    opacity: 0.6;
  }

  /* Transfer Panel Styles */
  .transfer-panel {
    position: fixed;
    bottom: -100%;
    left: 0;
    right: 0;
    height: 66%;
    max-height: 700px;
    background: #fff;
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    padding: 0;
    z-index: 1000;
    box-shadow: 0 -6px 20px rgba(0, 0, 0, 0.15);
    transition: bottom 0.35s ease;
    display: flex;
    flex-direction: column;
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
  }

  .transfer-panel.active {
    bottom: 0;
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
  }

  .transfer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #eee;
    background-color: #fff;
  }

  .transfer-header .transfer-title {
    font-size: 14px;
    font-weight: 600;
    color: #000;
    text-transform: uppercase;
    flex: 1;
    text-align: center;
    margin: 0;
  }

  .transfer-header .close-transfer {
    font-size: 22px;
    color: #000;
    cursor: pointer;
    padding: 0 4px;
    line-height: 1;
  }

  .info-box {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    background: #FAFAFA;
    border: 1px solid #DADCE0;
    border-radius: 6px;
    padding: 12px 16px;
    margin: 16px 20px;
    font-size: 13px;
    color: #555;
    line-height: 1.5;
  }

  .info-box .icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #ccc;
    color: white;
    font-size: 13px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .info-box .message {
    flex: 1;
  }

  .seat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 15px;
    font-weight: 500;
    color: #333;
    margin: 16px 20px;
    padding: 0 4px;
  }

  .seat-row .ticket-count {
    font-size: 15px;
    color: #555;
  }

  .seats {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding: 0 20px 20px;
    margin-bottom: 0;
  }

  .seat-btn {
    width: 85px;
    height: 70px;
    border-radius: 12px;
    background: linear-gradient(to bottom, #007aff 40%, #ffffff 40%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 10px;
    font-size: 14px;
    font-weight: 600;
    font-family: 'SF Pro Display', sans-serif;
    color: white;
    text-transform: uppercase;
    user-select: none;
    cursor: pointer;
    flex-shrink: 0;
    border: none;
    box-shadow: 0 5px 3px rgba(0, 0, 0, 0.08);
    transition: all 0.25s ease;
    position: relative;
    line-height: 1.1;
  }

  .seat-btn::after {
    content: "";
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 1.5px solid #ccc;
    background: white;
    display: block;
    margin-top: 12px;
    transition: all 0.25s ease;
  }

  .seat-btn.selected::after {
    border-color: #007aff;
    background-color: #007aff;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cpolyline points='20 6 10 17 4 12' /%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 12px 12px;
  }

  .seat-divider {
    height: 1px;
    background-color: #e0e0e0;
    width: 100%;
    margin: 12px 0 0 0;
  }

  .transfer-footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: #f6f6f6;
    padding: 14px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    border-top: 1px solid #e0e0e0;
    z-index: 1001;
    display: none;
  }

  .transfer-footer .count {
    color: #444;
    font-weight: 500;
  }

  .transfer-footer button {
    background: #007aff;
    color: white;
    padding: 10px 18px;
    border-radius: 8px;
    font-weight: 600;
    font-size: 15px;
    text-transform: uppercase;
    border: none;
    cursor: pointer;
  }

  /* Transfer Action Button Styles */
  .transfer-action-btn {
    border: 1.5px solid #007aff;
    color: #007aff;
    font-size: 15px;
    font-weight: 600;
    padding: 0 12px;
    border-radius: 0;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 40px;
    width: 100%;
    margin-bottom: 6px;
    box-sizing: border-box;
    gap: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .transfer-action-btn:hover {
    background-color: #f5f5f5;
  }

  .transfer-action-btn img {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }

  /* Admin Panel Styles */
  .admin-slideup {
    position: fixed;
    bottom: -100%;
    left: 0;
    right: 0;
    background: #fff;
    border-radius: 16px 16px 0 0;
    box-shadow: 0 -2px 12px rgba(0,0,0,0.15);
    padding: 16px 24px;
    transition: bottom 0.4s ease;
    z-index: 9999;
    max-height: 90vh;
    overflow-y: auto;
    font-family: 'Helvetica Neue', sans-serif;
  }

  .admin-slideup.active {
    bottom: 0;
  }

  .admin-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 18px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
  }

  .close-btn {
    color: royalblue;
    cursor: pointer;
    font-size: 14px;
  }

  .instruction {
    font-size: 13px;
    color: #777;
    margin-top: 10px;
    margin-bottom: 20px;
  }

  .admin-form label {
    display: block;
    font-size: 13px;
    margin-top: 14px;
    color: #444;
  }

  .admin-form input[type="text"],
  .admin-form input[type="number"],
  .admin-form input[type="file"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 14px;
    margin-top: 6px;
    box-sizing: border-box;
  }

  .admin-form button {
    width: 100%;
    margin-top: 24px;
    background: #111;
    color: white;
    border: none;
    padding: 12px;
    font-size: 15px;
    font-weight: 600;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .admin-form button:hover {
    background: #000;
  }

  .hidden {
    display: none !important;
  }

  /* Animation classes */
  .slide-container {
    transform: translateY(100%);
    opacity: 0;
    animation: slideInUp 0.3s ease-out forwards;
  }

  @keyframes slideInUp {
    to {
      transform: translateY(0%);
      opacity: 1;
    }
  }

  .ticket-card {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInCard 0.5s ease-out 0.6s forwards;
  }

  @keyframes fadeInCard {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .button-row {
    opacity: 0;
    transform: translateY(10px);
    animation: fadeInButtons 0.4s ease-out 1.1s forwards;
  }

  @keyframes fadeInButtons {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .ticket-title {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    line-clamp: 3;         /* standard property */
    -webkit-line-clamp: 3; /* WebKit */
  }
  </style>
</head>
<body>

<div class="slide-container">

<!-- Black Top Bar -->
<div style="
  background: #1c1c1e;
  color: white;
  padding: 14px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
">
  <div style="font-size: 16px; font-weight: 600; cursor: pointer;" onclick="goBack()">✕</div>
  <div style="position: absolute; left: 50%; transform: translateX(-50%); font-size: 16px; font-weight: 600;">
    My Ticket
  </div>
  <div style="font-size: 14px; cursor: pointer;" onclick="openAdmin()">Help</div>
</div>

<!-- Blue Tab Row -->
<div class="tab-row">
  <div id="ticketsTab" class="tab active">
    MY TICKETS (<span id="ticketCount">0</span>)
  </div>
  <div id="addonsTab" class="tab">
    ADD-ONS (0)
  </div>
</div>

<div class="carousel-wrapper" style="position: relative; padding-bottom: 80px;">
  <!-- Ticket Carousel -->
  <div class="ticket-carousel">
    <!-- Left spacer -->
    <div class="carousel-spacer"></div>

    <!-- Ticket 1 -->
    <div class="ticket-card" data-sec="119" data-row="13" data-seats="7">
      <div class="ticket-top-tip">
        <div class="ticket-label package-label">Standard Admission</div>
      </div>
      <div class="ticket-top">
        <div class="ticket-info">
          <div class="info-block"><div class="info-title">SEC</div><div class="info-value">119</div></div>
          <div class="info-block"><div class="info-title">ROW</div><div class="info-value">13</div></div>
          <div class="info-block"><div class="info-title">SEAT</div><div class="info-value">7</div></div>
        </div>
      </div>
      <div class="ticket-image">
        <img src="ticketpic.png" />
        <div class="gradient-overlay"></div>
        <div class="overlay">
          <div class="event-title">Gracie Abrams: The Secret Of Us Deluxe Tour with Role Model</div>
          <div class="event-sub">Tue, Jul 29, 2025, 8:00PM • Madison Square Garden</div>
        </div>
      </div>
      <div class="ticket-bottom">
        <div class="floor">7 AVE CHASE SQ</div>
        <button class="view-ticket">
          <img src="scan.png" alt="QR Icon" class="icon" />
          View Ticket
        </button>
        <div class="ticket-details">Ticket Details</div>
      </div>
      <div class="ticket-bottom-line"></div>
    </div>

    <!-- Ticket 2 -->
    <div class="ticket-card" data-sec="119" data-row="13" data-seats="8">
      <div class="ticket-top-tip">
        <div class="ticket-label package-label">Standard Admission</div>
      </div>
      <div class="ticket-top">
        <div class="ticket-info">
          <div class="info-block"><div class="info-title">SEC</div><div class="info-value">119</div></div>
          <div class="info-block"><div class="info-title">ROW</div><div class="info-value">13</div></div>
          <div class="info-block"><div class="info-title">SEAT</div><div class="info-value">8</div></div>
        </div>
      </div>
      <div class="ticket-image">
        <img src="ticketpic.png" />
        <div class="gradient-overlay"></div>
        <div class="overlay">
          <div class="event-title">Gracie Abrams: The Secret Of Us Deluxe Tour with Role Model</div>
          <div class="event-sub">Tue, Jul 29, 2025, 8:00PM • Madison Square Garden</div>
        </div>
      </div>
      <div class="ticket-bottom">
        <div class="floor">7 AVE CHASE SQ</div>
        <button class="view-ticket">
          <img src="scan.png" alt="QR Icon" class="icon" />
          View Ticket
        </button>
        <div class="ticket-details">Ticket Details</div>
      </div>
      <div class="ticket-bottom-line"></div>
    </div>

    <!-- Ticket 3 -->
    <div class="ticket-card" data-sec="119" data-row="13" data-seats="9">
      <div class="ticket-top-tip">
        <div class="ticket-label package-label">Standard Admission</div>
      </div>
      <div class="ticket-top">
        <div class="ticket-info">
          <div class="info-block"><div class="info-title">SEC</div><div class="info-value">119</div></div>
          <div class="info-block"><div class="info-title">ROW</div><div class="info-value">13</div></div>
          <div class="info-block"><div class="info-title">SEAT</div><div class="info-value">9</div></div>
        </div>
      </div>
      <div class="ticket-image">
        <img src="ticketpic.png"/>
        <div class="gradient-overlay"></div>
        <div class="overlay">
          <div class="event-title">Gracie Abrams: The Secret Of Us Deluxe Tour with Role Model</div>
          <div class="event-sub">Tue, Jul 29, 2025, 8:00PM • Madison Square Garden</div>
        </div>
      </div>
      <div class="ticket-bottom">
        <div class="floor">7 AVE CHASE SQ</div>
        <button class="view-ticket">
          <img src="scan.png" alt="QR Icon" class="icon" />
          View Ticket
        </button>
        <div class="ticket-details">Ticket Details</div>
      </div>
      <div class="ticket-bottom-line"></div>
    </div>

    <!-- Right spacer -->
    <div class="carousel-spacer"></div>
  </div>

  <!-- Dots -->
  <div class="dots">
    <span class="dot active"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>
</div>

<!-- Main Action Buttons -->
<div class="actions" id="actionsBar">
  <button class="btn transfer" onclick="openTransferPanel()">Transfer</button>
  <button class="btn sell">Sell</button>
</div>

</div>

<!-- Transfer Panel -->
<div class="transfer-panel" id="transferPanel">
  <!-- Header -->
  <div class="transfer-header">
    <div class="transfer-title">SELECT TICKET TO TRANSFER</div>
    <div class="close-transfer" id="closeTransferBtn">✕</div>
  </div>

  <!-- Info Box -->
  <div class="info-box">
    <div class="icon">i</div>
    <div class="message">
      Only transfer tickets to people you know and trust to ensure everyone stays safe and socially distanced.
    </div>
  </div>

  <!-- Section + Ticket Count -->
  <div class="seat-row">
    <div class="section-row">Sec 119, Row 13</div>
    <div class="ticket-count">◆ 3 Tickets</div>
  </div>

  <!-- Seat Buttons -->
  <div class="seats">
    <div class="seat-btn" data-seat="7">
      <div class="seat-label">SEAT 7</div>
    </div>
    <div class="seat-btn" data-seat="8">
      <div class="seat-label">SEAT 8</div>
    </div>
    <div class="seat-btn" data-seat="9">
      <div class="seat-label">SEAT 9</div>
    </div>
  </div>

  <!-- Divider -->
  <div class="seat-divider"></div>

  <!-- Footer -->
  <div class="transfer-footer">
    <div class="count">0 selected</div>
    <button id="transferBtn">TRANSFER TO ></button>
  </div>
</div>

<!-- Transfer Next Panel -->
<div class="transfer-panel" id="transferNextPanel" style="z-index: 1001;">
  <!-- Header -->
  <div class="transfer-header">
    <span class="close-transfer" onclick="closeTransferNext()">✕</span>
    <span class="transfer-title">TRANSFER TICKET</span>
    <span style="width: 24px;"></span> <!-- Symmetry spacer -->
  </div>

  <div style="height: 1px; background-color: #dcdcdc; width: 100%; margin: 0;"></div>

  <!-- Transfer Action Buttons -->
  <div style="display: flex; flex-direction: column; gap: 12px; padding: 24px 20px 16px;">
    <div class="transfer-action-btn">
      <span>Select From Contacts</span>
      <img src="contact.png" alt="Contact Icon" />
    </div>

    <div class="transfer-action-btn" onclick="openManualForm()">
      <span>Manually Enter A Recipient</span>
      <img src="plus.png" alt="Plus Icon" />
    </div>
  </div>

  <!-- Illustration & Info -->
  <div style="padding: 40px 20px 30px; text-align: center;">
    <div style="margin-bottom: 16px;">
      <img src="plane.png" alt="Plane Icon" style="width: 60px; height: 60px;">
    </div>
    <div style="font-size: 15px; font-weight: 600; margin-bottom: 8px;">
      Transfer Tickets Via Email or Text Message
    </div>
    <div style="font-size: 14px; color: #555; line-height: 1.5;">
      Select an Email or mobile number to transfer tickets to your recipient.
    </div>
  </div>

  <!-- Back Button -->
  <div style="
    font-size: 15px;
    font-weight: 600;
    color: #007aff;
    background: none;
    border: none;
    padding: 10px 0;
    margin: 0 20px 24px;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
  " onclick="goBackToTransfer()">‹ BACK</div>
</div>

<!-- Manual Form Panel -->
<div style="
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  max-height: 90%;
  background: #fff;
  padding: 24px 20px;
  box-sizing: border-box;
  z-index: 1002;
  overflow-y: auto;
  transform: translateY(100%);
  transition: transform 0.3s ease;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  box-shadow: 0 -2px 16px rgba(0, 0, 0, 0.15);
" id="manualFormPanel">
  <div style="text-align: center; margin-bottom: 20px;">
    <h3 style="font-size: 14px; font-weight: 600; text-transform: uppercase; color: #111; margin-bottom: 6px;">TRANSFER TICKETS</h3>
    <hr style="border: none; border-top: 1px solid #ccc; margin-bottom: 16px;">
    <div style="font-size: 14px; font-weight: 500; color: #111; text-align: left; margin-bottom: 24px;">
      <p><strong><span id="selectedTicketCount">2</span> Ticket(s) Selected</strong></p>
    </div>
  </div>

  <div style="max-width: 90%; margin: 0 auto; display: flex; flex-direction: column, gap: 16px;">
    <div>
      <label style="display: block; font-weight: 500; margin-bottom: 4px;">First Name</label>
      <input type="text" placeholder="First Name" style="width: 100%; padding: 10px 12px; font-size: 14px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;">
    </div>

    <div>
      <label style="display: block; font-weight: 500; margin-bottom: 4px;">Last Name</label>
      <input type="text" placeholder="Last Name" style="width: 100%; padding: 10px 12px; font-size: 14px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;">
    </div>

    <div>
      <label style="display: block; font-weight: 500; margin-bottom: 4px;">Email</label>
      <input type="email" placeholder="Email" style="width: 100%; padding: 10px 12px; font-size: 14px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box;">
    </div>

    <div>
      <label style="display: block; font-weight: 500; margin-bottom: 4px;">Add a message (Optional)</label>
      <textarea placeholder="Your message" style="width: 100%; padding: 10px 12px; font-size: 14px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; resize: vertical; min-height: 80px;"></textarea>
    </div>

    <div style="display: flex; justify-content: space-between; gap: 12px; margin-top: 20px;">
      <button onclick="goBackFromManualForm()" style="background: none; border: none; font-size: 14px; color: #666; padding: 10px 16px; cursor: pointer;">Cancel</button>
      <button style="background-color: #0070f3; color: #fff; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer;">Transfer</button>
    </div>
  </div>
</div>

<!-- Admin Panel -->
<div class="admin-slideup hidden" id="adminSlideUp">
  <div class="admin-header">
    Admin Panel
    <span class="close-btn" onclick="closeAdmin()">Close</span>
  </div>

  <div class="instruction">Update event details and manage tickets below.</div>

  <div class="admin-form">
    <label>Event Title:
      <input type="text" id="eventTitleInput" placeholder="e.g. Gracie Abrams Concert">
    </label>

    <label>Event Date:
      <input type="text" id="eventDateInput" placeholder="e.g. Tue, Jul 29, 2025, 8:00PM">
    </label>

    <label>Venue:
      <input type="text" id="eventVenueInput" placeholder="e.g. Madison Square Garden">
    </label>

    <label>Section:
      <input type="text" id="eventSectionInput" placeholder="e.g. 119">
    </label>

    <label>Row:
      <input type="text" id="eventRowInput" placeholder="e.g. 13">
    </label>

    <label>Number of Tickets:
      <input type="number" id="ticketCountInput" placeholder="e.g. 3" min="1" onchange="renderSeatInputs()">
    </label>

    <div id="seatInputsContainer"></div>

    <label>Floor Label:
      <input type="text" id="eventFloorInput" placeholder="e.g. 7 AVE CHASE SQ">
    </label>

    <label>Package:
      <input type="text" id="eventPackageInput" placeholder="e.g. Standard Admission">
    </label>

    <label>Upload Image:
      <input type="file" id="eventImageInput" accept="image/*">
    </label>

    <button onclick="updateEventInfo()">Save Changes</button>
  </div>
</div>

<script>
// DOM Elements
const carousel = document.querySelector('.ticket-carousel');
const transferPanel = document.getElementById('transferPanel');
const transferNextPanel = document.getElementById('transferNextPanel');
const manualFormPanel = document.getElementById('manualFormPanel');
const seatRowDisplay = document.querySelector('.section-row');
const seatsContainer = document.querySelector('.seats');
const countDisplay = document.querySelector('.transfer-footer .count');
const closeTransferBtn = document.getElementById('closeTransferBtn');
const transferBtnBottom = document.querySelector('.btn.transfer');
const transferFinalBtn = document.getElementById('transferBtn');
const actionsBar = document.getElementById('actionsBar');
const transferFooter = document.querySelector('.transfer-footer');

let selectedSeats = [];

// Scroll Dot Tracking
function setupCarouselScrollTracking() {
  const dots = document.querySelectorAll('.dot');
  if (!carousel || !dots.length) return;

  if (carousel.__dotScrollAttached) {
    carousel.removeEventListener('scroll', carousel.__dotScrollHandler);
  }

  const scrollHandler = () => {
    const card = carousel.querySelector('.ticket-card');
    if (!card) return;
    const cardWidth = card.offsetWidth + 16;
    const scrollLeft = carousel.scrollLeft;
    const index = Math.round(scrollLeft / cardWidth);
    dots.forEach(dot => dot.classList.remove('active'));
    if (dots[index]) dots[index].classList.add('active');
  };

  carousel.__dotScrollHandler = scrollHandler;
  carousel.__dotScrollAttached = true;
  carousel.addEventListener('scroll', scrollHandler);
}

// Open Transfer Panel
function openTransferPanel() {
  const cards = document.querySelectorAll('.ticket-card');
  const seatList = Array.from(cards).map(card => card.dataset.seats);
  
  // Update section + row label
  const firstCard = cards[0];
  if (firstCard) {
    const sec = firstCard.dataset.sec || '-';
    const row = firstCard.dataset.row || '-';
    if (seatRowDisplay) {
      seatRowDisplay.textContent = `Sec ${sec}, Row ${row}`;
    }
  }

  // Update ticket count label
  const ticketCountLabel = document.querySelector('.seat-row .ticket-count');
  if (ticketCountLabel) {
    const label = seatList.length === 1 ? '◆ 1 Ticket' : `◆ ${seatList.length} Tickets`;
    ticketCountLabel.textContent = label;
  }

  // Render seat buttons
  renderSeats(seatList);

  // Show the transfer panel
  transferPanel.classList.add('active');
  actionsBar?.classList.add('hidden');
  transferFooter.style.display = 'flex';
}

// Render Seats
function renderSeats(seatList) {
  seatsContainer.innerHTML = '';
  selectedSeats = [];

  seatList.forEach(seat => {
    const seatDiv = document.createElement('div');
    seatDiv.className = 'seat-btn';
    seatDiv.dataset.seat = seat;

    seatDiv.innerHTML = `<div class="seat-label">SEAT ${seat}</div>`;

    seatDiv.addEventListener('click', () => {
      seatDiv.classList.toggle('selected');
      const seatNum = seatDiv.dataset.seat;

      if (selectedSeats.includes(seatNum)) {
        selectedSeats = selectedSeats.filter(s => s !== seatNum);
      } else {
        selectedSeats.push(seatNum);
      }

      countDisplay.textContent = selectedSeats.length === 1 ? '1 selected' : `${selectedSeats.length} selected`;
    });

    seatsContainer.appendChild(seatDiv);
  });

  countDisplay.textContent = '0 selected';
}

// Close Transfer Panel
function closeTransfer() {
  transferPanel.classList.remove('active');
  transferNextPanel.classList.remove('active');
  manualFormPanel.style.transform = 'translateY(100%)';
  actionsBar?.classList.remove('hidden');
  transferFooter.style.display = 'none';
  selectedSeats = [];
}

// Close Transfer Next Panel
function closeTransferNext() {
  transferNextPanel.classList.remove('active');
  actionsBar?.classList.remove('hidden');
  selectedSeats = [];
}

// Go back to main transfer panel from next panel
function goBackToTransfer() {
  transferNextPanel.classList.remove('active');
  transferPanel.classList.add('active');
}

// Open Manual Form
function openManualForm() {
  transferNextPanel.classList.remove('active');
  manualFormPanel.style.transform = 'translateY(0%)';
  document.getElementById('selectedTicketCount').textContent = selectedSeats.length;
}

// Go back from manual form to transfer next panel
function goBackFromManualForm() {
  manualFormPanel.style.transform = 'translateY(100%)';
  transferNextPanel.classList.add('active');
}

// Bind Interactive Buttons
function bindInteractiveButtons() {
  document.querySelectorAll('.view-ticket').forEach(btn => {
    btn.onclick = function () {
      console.log('View ticket clicked');
    };
  });
}

// Admin Panel Functions
function openAdmin() {
  const panel = document.getElementById('adminSlideUp');
  if (panel) {
    panel.classList.remove('hidden');
    panel.classList.add('active');
  }
}

function closeAdmin() {
  const panel = document.getElementById('adminSlideUp');
  if (panel) {
    panel.classList.remove('active');
    panel.classList.add('hidden');
  }
}

// Generate Seat Inputs Based on Ticket Count
function renderSeatInputs() {
  const count = parseInt(document.getElementById('ticketCountInput')?.value || '0', 10);
  const container = document.getElementById('seatInputsContainer');
  container.innerHTML = '';

  for (let i = 1; i <= count; i++) {
    const label = document.createElement('label');
    label.textContent = `Seat ${i}:`;
    label.style.marginTop = '10px';
    
    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = `e.g. ${6 + i}`;
    input.id = `seatInput${i}`;
    input.style.marginBottom = '8px';
    input.className = 'seat-input';
    
    container.appendChild(label);
    container.appendChild(input);
  }
}

// Create Ticket Card Element
function createTicketCard(index, seat) {
  const card = document.createElement('div');
  card.className = 'ticket-card';
  card.dataset.seats = seat;

  card.innerHTML = `
    <div class="ticket-top-tip">
      <div class="ticket-label package-label">Package</div>
    </div>
    <div class="ticket-top">
      <div class="ticket-info">
        <div class="info-block"><div class="info-title">SEC</div><div class="info-value">-</div></div>
        <div class="info-block"><div class="info-title">ROW</div><div class="info-value">-</div></div>
        <div class="info-block"><div class="info-title">SEAT</div><div class="info-value">${seat}</div></div>
      </div>
    </div>
    <div class="ticket-image">
      <img src="https://via.placeholder.com/340x280/0074e4/white?text=Event+Image" alt="Event Image" />
      <div class="gradient-overlay"></div>
      <div class="overlay">
        <div class="event-title">Event Title</div>
        <div class="event-sub">Date • Venue</div>
      </div>
    </div>
    <div class="ticket-bottom">
      <div class="floor">FLOOR</div>
      <button class="view-ticket">
        <img src="scan.png" alt="QR Icon" class="icon" />
        View Ticket
      </button>
      <div class="ticket-details">Ticket Details</div>
    </div>
    <div class="ticket-bottom-line"></div>
  `;

  return card;
}

// Update Event Info
function updateEventInfo() {
  const title = document.getElementById('eventTitleInput')?.value.trim();
  const date = document.getElementById('eventDateInput')?.value.trim();
  const venue = document.getElementById('eventVenueInput')?.value.trim();
  const section = document.getElementById('eventSectionInput')?.value.trim();
  const row = document.getElementById('eventRowInput')?.value.trim();
  const floor = document.getElementById('eventFloorInput')?.value.trim();
  const packageName = document.getElementById('eventPackageInput')?.value.trim();
  const ticketCount = parseInt(document.getElementById('ticketCountInput')?.value || '0', 10);
  const imageInput = document.getElementById('eventImageInput');

  // Build seat list
  const seatList = [];
  for (let i = 1; i <= ticketCount; i++) {
    const seatVal = document.getElementById(`seatInput${i}`)?.value.trim() || `${6 + i}`;
    seatList.push(seatVal);
  }

  if (!carousel) return;

  // Clear carousel and add left spacer
  carousel.innerHTML = '';
  const leftSpacer = document.createElement('div');
  leftSpacer.className = 'carousel-spacer';
  carousel.appendChild(leftSpacer);

  for (let i = 0; i < ticketCount; i++) {
    const seat = seatList[i];
    const card = createTicketCard(i + 1, seat);

    // Update visible ticket data
    if (title) card.querySelector('.event-title').textContent = title;
    if (date && venue) card.querySelector('.event-sub').textContent = `${date} • ${venue}`;
    if (floor) card.querySelector('.floor').textContent = floor;
    if (packageName) card.querySelector('.package-label').textContent = packageName;

    // Set correct data attributes
    if (section) card.setAttribute('data-sec', section);
    if (row) card.setAttribute('data-row', row);
    if (seat) card.setAttribute('data-seats', seat);

    // Update visible SEC, ROW, SEAT in card
    const infoValues = card.querySelectorAll('.info-block .info-value');
    if (infoValues.length >= 3) {
      if (section) infoValues[0].textContent = section;
      if (row) infoValues[1].textContent = row;
      if (seat) infoValues[2].textContent = seat;
    }

    // Handle image upload
    if (imageInput?.files && imageInput.files[0]) {
      const reader = new FileReader();
      reader.onload = function (e) {
        const img = card.querySelector('.ticket-image img');
        if (img) img.src = e.target.result;
      };
      reader.readAsDataURL(imageInput.files[0]);
    }

    carousel.appendChild(card);
  }

  // Right spacer
  const rightSpacer = document.createElement('div');
  rightSpacer.className = 'carousel-spacer';
  carousel.appendChild(rightSpacer);

  // Update scroll dots
  const dotsContainer = document.querySelector('.dots');
  if (dotsContainer) {
    dotsContainer.innerHTML = '';
    for (let i = 0; i < ticketCount; i++) {
      const dot = document.createElement('span');
      dot.className = 'dot';
      if (i === 0) dot.classList.add('active');
      dotsContainer.appendChild(dot);
    }
  }

  // Rebind click events
  bindInteractiveButtons();

  // Update ticket count
  updateTicketCount();

  // Re-enable scroll tracking
  setupCarouselScrollTracking();

  // Close admin panel
  closeAdmin();
}

// Update Ticket Count
function updateTicketCount() {
  const cards = document.querySelectorAll('.ticket-card');
  const count = cards.length;
  const countSpan = document.getElementById('ticketCount');

  if (countSpan) {
    countSpan.textContent = count;
  }
}

// Go Back Function
function goBack() {
  console.log('Going back...');
}

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
  updateTicketCount();
  setupCarouselScrollTracking();
  bindInteractiveButtons();

  // Transfer button event listeners
  if (transferFinalBtn) {
    transferFinalBtn.addEventListener('click', () => {
      if (selectedSeats.length === 0) {
        alert("Please select at least one seat.");
        return;
      }
      // Go to transfer next panel
      transferPanel.classList.remove('active');
      transferNextPanel.classList.add('active');
      transferFooter.style.display = 'none';
    });
  }

  if (transferBtnBottom) {
    transferBtnBottom.addEventListener('click', openTransferPanel);
  }

  if (closeTransferBtn) {
    closeTransferBtn.addEventListener('click', closeTransfer);
  }
});
</script>

</body>
</html>